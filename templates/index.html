{% extends "layout.html" %}

{% block content %}
<div class="row align-items-center py-5">
    <div class="col-md-6">
        <h1 class="display-4 fw-bold text-warning">Compete in PUBG Console Tournaments</h1>
        <p class="lead">Join the elite PS5 and Xbox Series players. Free-to-enter tournaments with real PayPal payouts funded by our sponsors.</p>
        <div class="mt-4">
            <a href="{{ url_for('tournaments') }}" class="btn btn-primary btn-lg">View Active Tournaments</a>
            <a href="#how-it-works" class="btn btn-outline-light btn-lg ms-2">How it Works</a>
        </div>
    </div>
    <div class="col-md-6">
        <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&w=800&q=80" alt="Gaming" class="img-fluid rounded shadow-lg">
    </div>
</div>

<div class="container my-5 py-5" id="how-it-works">
    <div class="row text-center">
        <div class="col-md-4 mb-4">
            <i class="fas fa-link stat-icon text-warning fs-1 mb-3"></i>
            <h3>1. Link ID</h3>
            <p class="text-muted">Connect your Xbox Gamertag or PSN ID to our secure platform.</p>
        </div>
        <div class="col-md-4 mb-4">
            <i class="fas fa-chart-line stat-icon text-warning fs-1 mb-3"></i>
            <h3>2. Compete</h3>
            <p class="text-muted">Play in scheduled tournaments. We track your kills and wins via the PUBG API.</p>
        </div>
        <div class="col-md-4 mb-4">
            <i class="fab fa-paypal stat-icon text-warning fs-1 mb-3"></i>
            <h3>3. Get Paid</h3>
            <p class="text-muted">Winnings are automatically credited to your balance and sent to your PayPal.</p>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-md-8">
        <h2 class="text-warning mb-4">Top Players (Xbox & PS5)</h2>
        <div class="card p-3">
            <table class="table table-dark table-hover">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Player</th>
                        <th>Wins</th>
                        <th>Kills</th>
                    </tr>
                </thead>
                <tbody>
                    {% if top_players %}
                        {% for player in top_players %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ player.username }} <small class="text-muted">({{ player.platform }})</small></td>
                            <td>{{ player.total_wins }}</td>
                            <td>{{ player.total_kills }}</td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4" class="text-center text-muted">No stats recorded yet.</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 p-3">
            <h3 class="text-warning mb-3">Our Sponsors</h3>
            <p class="small text-muted mb-4">Every interaction with our sponsors directly increases the tournament prize pools!</p>
            <div class="list-group list-group-flush">
                {% if sponsors %}
                    {% for sponsor in sponsors %}
                    <a href="{{ sponsor.website_url }}" target="_blank" class="list-group-item list-group-item-action bg-transparent text-light border-secondary">
                        <i class="fas fa-external-link-alt me-2 text-warning small"></i> {{ sponsor.name }}
                    </a>
                    {% endfor %}
                {% else %}
                    <p class="text-muted small">No active sponsors yet. Interested? <a href="#" class="text-warning">Contact us</a>.</p>
                {% endif %}
            </div>
            <hr>
            <h3>Fast Payouts</h3>
            <p>Direct to your PayPal. Winnings come from a combination of <strong>community donations</strong> and <strong>credits earned from sponsors</strong>.</p>
        </div>
    </div>
</div>
{% endblock %}
